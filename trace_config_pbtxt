buffers {
  size_kb: 800096
  fill_policy: DISCARD
}
buffers {
  size_kb: 4096
  fill_policy: DISCARD
}
buffers {
  size_kb: 8
  fill_policy: DISCARD
}
data_sources {
  config {
    name: "android.packages_list"
    target_buffer: 1
  }
}
data_sources {
  config {
    name: "linux.process_stats"
    target_buffer: 1
    process_stats_config {
      scan_all_processes_on_start: true
    }
  }
}
data_sources {
  config {
    name: "android.power"
    target_buffer: 0
    android_power_config {
      battery_poll_ms: 100
      collect_power_rails: true
    }
  }
}
data_sources {
  config {
    name: "linux.system_info"
    target_buffer: 1
  }
}
data_sources: {
    config {
        name: "android.log"
        android_log_config {
            min_prio: PRIO_VERBOSE
            log_ids: LID_DEFAULT
            log_ids: LID_EVENTS
            log_ids: LID_SYSTEM
        }
    }
}

data_sources {
  config {
    name: "org.chromium.trace_event"
    chrome_config {
      trace_config: "{\"record_mode\":\"record-until-full\",\"included_categories\":[\"loading\",\"navigation\",\"toplevel\",\"latencyInfo\",\"latency\",\"v8\",\"blink\",\"input\"],\"excluded_categories\":[\"*\"],\"memory_dump_config\":{}}"
      privacy_filtering_enabled: false
      client_priority: USER_INITIATED
    }
  }
}
data_sources {
  config {
    name: "track_event"
    track_event_config {
      disabled_categories: "*"
      enabled_categories: "loading"
      enabled_categories: "navigation"
      enabled_categories: "toplevel"
      enabled_categories: "latencyInfo"
      enabled_categories: "latency"
      enabled_categories: "v8"
      enabled_categories: "blink"
      enabled_categories: "input"
      enabled_categories: "__metadata"
      timestamp_unit_multiplier: 1000
      filter_debug_annotations: false
      enable_thread_time_sampling: true
      filter_dynamic_event_names: false
    }
    chrome_config {
      trace_config: "{\"record_mode\":\"record-until-full\",\"included_categories\":[\"loading\",\"navigation\",\"toplevel\",\"latencyInfo\",\"latency\",\"v8\",\"blink\",\"input\"],\"excluded_categories\":[\"*\"],\"memory_dump_config\":{}}"
      privacy_filtering_enabled: false
      client_priority: USER_INITIATED
    }
  }
}
data_sources {
  config {
    name: "org.chromium.trace_metadata"
    chrome_config {
      trace_config: "{\"record_mode\":\"record-until-full\",\"included_categories\":[\"loading\",\"navigation\",\"toplevel\",\"latencyInfo\",\"latency\",\"v8\",\"blink\",\"input\"],\"excluded_categories\":[\"*\"],\"memory_dump_config\":{}}"
      privacy_filtering_enabled: false
      client_priority: USER_INITIATED
    }
  }
}
data_sources {
  config {
    name: "linux.sys_stats"
    sys_stats_config {
      stat_period_ms: 1000
      stat_counters: STAT_CPU_TIMES
      stat_counters: STAT_FORK_COUNT
      cpufreq_period_ms: 1000
    }
  }
}
data_sources {
  config {
    name: "android.surfaceflinger.frametimeline"
  }
}

data_sources {
  config {
    name: "linux.ftrace"
    ftrace_config {      
      ftrace_events: "sched/sched_switch"
      ftrace_events: "power/suspend_resume"
      ftrace_events: "sched/sched_wakeup"
      ftrace_events: "sched/sched_wakeup_new"
      ftrace_events: "sched/sched_waking"
      ftrace_events: "power/cpu_frequency"
      ftrace_events: "power/cpu_idle"
      ftrace_events: "power/gpu_frequency"
      ftrace_events: "devfreq/devfreq_frequency"
      ftrace_events: "power/clock_enable"
      ftrace_events: "power/clock_disable"
      ftrace_events: "power/clock_set_rate"
      ftrace_events: "sched/sched_process_exit"
      ftrace_events: "sched/sched_process_free"
      ftrace_events: "task/task_newtask"
      ftrace_events: "task/task_rename"
      ftrace_events: "sched/sched_blocked_reason"
      ftrace_events: "sched/sched_cpu_util_cfs"
      ftrace_events: "sched/sched_find_energy_efficient_cpu"
      ftrace_events: "sched/sched_wakeup_task_attr"
      ftrace_events: "sched/sched_select_task_rq_fair"
      ftrace_events: "sched/sched_pelt_se"
      ftrace_events: "pixel_mm/pixel_mm_kswapd_wake"
      ftrace_events: "pixel_mm/pixel_mm_kswapd_done"
      ftrace_events: "perf_trace_counters/sched_switch_with_ctrs"
      ftrace_events: "preemptirq_long/preempt_disable_long"
      ftrace_events: "preemptirq_long/irq_disable_long"
      ftrace_events: "ftrace/print"
      atrace_categories: "am"
      atrace_categories: "thermal"
      atrace_categories: "aidl"
      atrace_categories: "wm"
      atrace_categories: "ss"
      atrace_categories: "dalvik"
      atrace_categories: "sched"
      atrace_categories: "freq"
      atrace_categories: "gfx"
      atrace_categories: "view"
      atrace_categories: "webview"
      atrace_categories: "input"
      atrace_categories: "hal"
      atrace_categories: "irq"
      atrace_categories: "binder_driver"
      atrace_categories: "sync"
      atrace_categories: "workq"
      atrace_categories: "idle"
      atrace_categories: "power"
      compact_sched {
        enabled: true
      }
      symbolize_ksyms: true
      # enable_function_graph: true 
      # function_filters: "sst_timer_isr"
    }
  }
}
duration_ms: 60000
