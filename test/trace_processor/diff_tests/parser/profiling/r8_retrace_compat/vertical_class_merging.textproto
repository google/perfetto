# Test data for VerticalClassMergingStackSampleRetraceTest
# R8 mapping: Class A merged into subclass B
#   A -> R8$$REMOVED$$CLASS$$0 (removed class marker)
#   B -> a
#   a.d -> A.foo()
#   a.b -> A.bar()
#   a.c -> A.baz()
#   a.a -> B.bar()

packet {
  clock_snapshot {
    clocks: { clock_id: 6 timestamp: 0 }
    clocks: { clock_id: 4 timestamp: 10 }
  }
}
packet {
  process_tree {
    processes { pid: 1 ppid: 0 cmdline: "init" uid: 0 }
    processes { pid: 100 ppid: 1 cmdline: "com.example.app" uid: 10001 }
  }
}
packet {
  packages_list {
    packages { name: "com.example.app" uid: 10001 }
  }
}
packet {
  trusted_packet_sequence_id: 1
  previous_packet_dropped: true
  incremental_state_cleared: true
  timestamp: 100
  profile_packet {
    strings { iid: 1 str: "a.d" }
    strings { iid: 2 str: "a.b" }
    strings { iid: 3 str: "a.c" }
    strings { iid: 4 str: "a.a" }
    strings { iid: 5 str: "data/app/com.example.app/base.apk" }
    strings { iid: 6 str: "" }
    frames { iid: 1 function_name_id: 1 mapping_id: 1 rel_pc: 0x1000 }
    frames { iid: 2 function_name_id: 2 mapping_id: 1 rel_pc: 0x2000 }
    frames { iid: 3 function_name_id: 3 mapping_id: 1 rel_pc: 0x3000 }
    frames { iid: 4 function_name_id: 4 mapping_id: 1 rel_pc: 0x4000 }
    callstacks { iid: 1 frame_ids: 1 }
    callstacks { iid: 2 frame_ids: 2 }
    callstacks { iid: 3 frame_ids: 3 }
    callstacks { iid: 4 frame_ids: 4 }
    mappings { iid: 1 path_string_ids: 5 build_id: 6 }
    process_dumps {
      pid: 100
      samples { callstack_id: 1 self_allocated: 1000 alloc_count: 1 }
      samples { callstack_id: 2 self_allocated: 1000 alloc_count: 1 }
      samples { callstack_id: 3 self_allocated: 1000 alloc_count: 1 }
      samples { callstack_id: 4 self_allocated: 1000 alloc_count: 1 }
    }
  }
}
packet {
  deobfuscation_mapping {
    package_name: "com.example.app"
    version_code: 1
    obfuscated_classes {
      obfuscated_name: "a"
      deobfuscated_name: "com.example.B"
      obfuscated_methods {
        # A.foo() - from merged parent class
        obfuscated_name: "d"
        deobfuscated_name: "com.example.A.foo"
      }
      obfuscated_methods {
        # A.bar() - from merged parent class
        obfuscated_name: "b"
        deobfuscated_name: "com.example.A.bar"
      }
      obfuscated_methods {
        # A.baz() - from merged parent class
        obfuscated_name: "c"
        deobfuscated_name: "com.example.A.baz"
      }
      obfuscated_methods {
        # B.bar() - own method
        obfuscated_name: "a"
        deobfuscated_name: "bar"
      }
    }
  }
}
