// Copyright (C) 2024 The Android Open Source Project
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

@use "sass:math";
@import "../theme";

// Adding these to a new layer makes other rules take precedence
@layer pf-widgets {
  .pf-vtable {
    overflow: auto;
    position: relative;
    background: var(
      --pf-color-background
    ); // Performance tweak - see b/335451611

    .pf-vtable-content {
      display: inline-flex;
      flex-direction: column;
      min-width: 100%;

      .pf-vtable-header {
        font-weight: bold;
        position: sticky;
        top: 0;
        z-index: 1;
        background: var(--pf-color-background);
        white-space: nowrap;
        padding-inline: 4px;

        // A shadow improves distinction between header and content
        box-shadow: var(--pf-color-box-shadow) 0px 0px 8px;
      }

      .pf-vtable-data {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        margin-right: 8px;
        display: inline-block;
      }

      .pf-vtable-slider {
        overflow: hidden;

        // Necessary trig because we have a 45deg stripes
        $pattern-density: 1px * math.sqrt(2);
        $pattern-col: var(--pf-color-background-secondary);
        overflow: hidden;

        background: repeating-linear-gradient(
          -45deg,
          $pattern-col,
          $pattern-col $pattern-density,
          var(--pf-color-background) $pattern-density,
          var(--pf-color-background) $pattern-density * 2
        );

        .pf-vtable-puck {
          .pf-vtable-row {
            display: flex;
            align-items: center;
            white-space: nowrap;
            padding-inline: 4px;

            &:nth-child(odd) {
              background: var(--pf-color-background-secondary);
            }

            &:nth-child(even) {
              background: var(--pf-color-background);
            }

            &:hover {
              background: color-mix(
                in srgb,
                var(--pf-color-interactive-base) 20%,
                var(--pf-color-background)
              );
            }
          }
        }
      }
    }
  }
}
