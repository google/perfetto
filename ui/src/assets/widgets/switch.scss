// Copyright (C) 2023 The Android Open Source Project
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

@import "theme";

.pf-switch {
  display: inline-flex;
  align-items: center;
  position: relative;
  font-family: $pf-font;
  font-size: inherit;
  color: $pf-minimal-foreground;
  user-select: none;
  cursor: pointer;
  gap: 6px;

  // Hide the default checkbox
  input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
  }

  .pf-switch-label-left {
    order: 1;
  }

  .pf-switch-visual {
    order: 2;
    position: relative;
    height: 16px;
    width: 32px;
    border-radius: 8px;
    transition: background $pf-anim-timing;
    background: grey;
    vertical-align: middle;

    // The :after element forms the "thumb" of the switch
    &:after {
      content: "";
      display: block;
      position: absolute;
      left: 2px;
      top: 0;
      bottom: 0;
      margin-top: auto;
      margin-bottom: auto;
      width: 12px;
      height: 12px;
      background: $pf-primary-foreground;
      box-sizing: border-box;
      border-radius: 50%;
      transition: left $pf-anim-timing;
    }
  }

  .pf-switch-label {
    order: 3;
  }

  input:checked ~ .pf-switch-visual {
    background: $pf-primary-background;
  }

  input:checked ~ .pf-switch-visual:after {
    left: 18px;
  }

  input:focus-visible ~ .pf-switch-visual {
    @include focus;
  }

  &.pf-disabled {
    cursor: not-allowed;
    color: $pf-minimal-foreground-disabled;

    .pf-switch-visual {
      border-color: $pf-minimal-foreground-disabled;
      background: $pf-minimal-foreground-disabled;
      &:after {
        border-color: $pf-minimal-foreground-disabled;
      }
    }

    input:checked ~ .pf-switch-visual {
      border-color: $pf-primary-background-disabled;
      background: $pf-primary-background-disabled;
    }
  }
}
